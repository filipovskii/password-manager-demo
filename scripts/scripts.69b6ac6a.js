"use strict";angular.module("passwordManagerApp",["ngAnimate","ngCookies","ngRoute","ngSanitize","ngTouch","ui.router"]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/search"),a.state("search",{url:"/search",templateUrl:"views/search.html",controller:"SearchCtrl"}).state("add",{url:"/add",templateUrl:"views/add.html",controller:"AddCtrl"}).state("view",{url:"/view/:pageId",templateUrl:"views/view.html",controller:"ViewCtrl"})}]).run(function(){Parse.initialize("Y31fi6LSWqm0SVtBOGiiulHEbvRHIicyhUtkVxEM","GxOG217xremqbVWNF3Db4rdIZiADE5EZrKvZ8e9J")}),angular.module("passwordManagerApp").controller("SearchCtrl",["$scope","Pages",function(a,b){a.selectPage=function(b){a.selectedPage=b},a.selected=function(b){return b===a.selectedPage?"selected":""},a.search=function(){var c;return c=a.selectedCategory||a.query?b.find({category:a.selectedCategory,query:a.query}):b.findAll(),c.then(function(b){a.$apply(function(){a.pages=b})})},a.remove=function(c){return a.selectedPage===c&&(a.selectedPage=null),a.pages=_.without(a.pages,c),b.remove(c)},a.search().then(function(){a.$apply(function(){a.categories=_.union([""],_.map(a.pages,function(a){return a.category})),a.selectedCategory=a.categories[0],a.$watch("selectedCategory",a.search),a.$watch("query",a.search)})})}]),angular.module("passwordManagerApp").controller("AddCtrl",["$scope","$state","Pages",function(a,b,c){a.page={},a.addPage=function(){c.add(a.page).then(function(){b.go("search")})}}]),angular.module("passwordManagerApp").service("Pages",function(){function a(a){var b={};return _.extend(b,a.attributes),b.createdAt=a.createdAt.toLocaleString(),b.id=a.id,b}function b(b){return _.map(b,a)}var c=Parse.Object.extend("Page");this.add=function(a){var a=new c(a);return a.save()},this.findAll=function(){var a=new Parse.Query(c);return a.find().then(b)},this.find=function(a){var d=new Parse.Query(c);return a.query&&d.contains("name",a.query),a.category&&d.equalTo("category",a.category),d.find().then(b)},this.get=function(b){return new Parse.Query(c).get(b).then(a)},this.remove=function(a){new c(a).destroy()}}),angular.module("passwordManagerApp").controller("ViewCtrl",["$scope","$stateParams","Pages",function(a,b,c){a.plain=!1,c.get(b.pageId).then(function(b){a.$apply(function(){a.page=b})}),a.showPlaintext=function(){a.plain=!0},a.password=function(){var b;return a.page?a.plain?a.page.password:(b=new Array(a.page.password.length),b.join("*")):""}}]);